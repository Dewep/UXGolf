<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=450, user-scalable=no">
    <title>UXGolf</title>
    <link rel="Shortcut icon" href="https://uxgolf.dewep.net/favicon.ico" type="image/x-icon"/>
    <link rel="manifest" href="https://uxgolf.dewep.net/manifest.json">
    <style type="text/css">
      html, body, #app {
        margin: 0;
        font-family: "Segoe UI", verdana;
      }
      html {
        font-size: 20px;
      }
      body {
        font-size: .8rem;
        background: #FFF;
        color: #3B4351;
      }
      .icon {
        box-sizing: border-box;
        display: inline-block;
        font-size: inherit;
        font-style: normal;
        height: 1em;
        position: relative;
        text-indent: -9999px;
        vertical-align: middle;
        width: 1em;
      }
      .icon::after, .icon::before {
        content: "";
        display: block;
        left: 50%;
        position: absolute;
        top: 50%;
        transform: translate(-50%,-50%);
      }
      .icon-arrow-left::before, .icon-arrow-right::before {
        border: 0.2rem solid currentColor;
        border-bottom: 0;
        border-right: 0;
        height: 0.65em;
        width: 0.65em;
      }
      .icon-arrow-left::before {
        transform: translate(-25%,-50%) rotate(-45deg);
      }
      .icon-arrow-right::before {
        transform: translate(-75%,-50%) rotate(135deg);
      }
      .btn {
        appearance: none;
        background: #0f4706e6;
        color: #fff;
        border: 0.05rem solid #0f4706;
        border-radius: 0.1rem;
        cursor: pointer;
        display: inline-block;
        outline: 0;
        padding: 0.45rem 1rem;
        text-align: center;
        text-decoration: none;
        user-select: none;
        vertical-align: middle;
        white-space: nowrap;
      }
      .btn:focus, .btn:hover, .btn:active, .btn.active {
        background: #0f4706cc;
      }
      header {
        padding: .6rem 1rem .6rem 2.2rem;
        background: #0E4706;
        color: #FFF;
        font-weight: bold;
        font-size: 1.5rem;
        cursor: pointer;
        text-overflow: ellipsis;
        white-space: nowrap;
        overflow: hidden;
      }
      header .icon {
        position: absolute;
        top: 1.2rem;
        font-size: 1rem;
        left: .6rem;
      }
      nav {
        display: flex;
        border-bottom: .1rem solid #EEE;
      }
      nav > .arrow {
        flex: 0 0 auto;
        cursor: pointer;
        font-size: 2rem;
        padding: 1.5rem 1rem;
      }
      nav > .content {
        flex: 1 1 auto;
        text-align: center;
        clear: both;
        padding: 1rem 0;
      }
      nav > .content > h2 {
        margin: 0;
        font-size: .8rem;
        color: #777;
      }
      nav > .content > .content-left, nav > .content > .content-right {
        float: left;
        width: calc(50% - 2rem);
        padding: 0 1rem;
        font-size: 1.5rem;
        text-align: right;
      }
      nav > .content > .content-right {
        text-align: left;
      }
      nav .btn {
        margin-top: 0.5rem;
      }
      section.summary-hole {
        display: flex;
        padding: 1rem 2rem;
        font-size: 1.7rem;
        font-weight: bold;
      }
      section.summary-hole > div {
        flex: 1 1 auto;
        text-align: left;
      }
      section.summary-hole > div.right {
        text-align: right;
      }
      section.actions {
        text-align: center;
        padding: 1rem;
        font-size: 1.2rem;
        font-weight: bold;
      }
      section.actions em {
        display: block;
        font-style: normal;
        font-weight: bold;
        font-size: 3rem;
        margin-bottom: 2rem;
      }
      section.details {
        padding: 0 2rem;
      }
      section.details ol li {
        padding: 0.3rem;
        font-size: 1rem;
        cursor: pointer;
        border-bottom: .05rem solid #f5f5f5;
        position: relative;
      }
      section.details ol li small {
        position: absolute;
        right: 0;
        bottom: 0.3rem;
      }
      section.details ol li small span {
        margin-left: 0.5rem;
        background: #dff1dc;
        border-radius: 1rem;
        height: 1.3rem;
        display: inline-block;
      }
      section.details ol li small span a {
        background: #dce3da;
        display: inline-block;
        width: 1.3rem;
        text-align: center;
        border-radius: 1rem;
        height: 1.3rem;
        font-weight: bold;
      }
      section.summary-global {
        padding: 1rem 2rem;
        border-bottom: .1rem solid #EEE;
        text-align: center;
      }
      section.summary-global h2 {
        margin: 0 0 1rem;
        font-size: 1.5rem;
      }
      section.summary-global table {
        width: 100%;
        text-align: center;
      }
      section.summary-global table th {
        width: 16.66%;
      }
      section.selection {
        text-align: center;
      }
      section.selection .btn {
        margin: 1rem 1rem 2rem;
        font-size: 1.2rem;
        font-weight: bold;
      }
      section.selection > a {
        padding: 1rem 3rem 1rem 1rem;
        border-bottom: .1rem solid #EEE;
        position: relative;
        display: block;
        text-align: left;
        font-size: 1rem;
        cursor: pointer;
      }
      section.selection > a .icon {
        position: absolute;
        right: 1rem;
        font-size: 2rem;
        padding: 1.2rem;
      }
      section.course-detail {
        padding: 1rem;
        cursor: pointer;
        border-bottom: .1rem solid #EEE;
        text-align: center;
      }
      section.course-detail h2 {
        margin: 0 0 0.5rem;
        font-size: 1rem;
      }
      section.course-detail span {
        margin: 0 1rem;
        word-break: keep-all;
        display: inline-block;
      }
      section.export {
        text-align: center;
        font-size: .6rem;
        padding: 2rem;
      }
      section.export .btn {
        margin: 0 1rem;
      }
      section.svg svg {
        width: 100%;
        max-height: 80vh;
        background: #dce3da;
        margin: 0 auto;
      }
    </style>
  </head>
  <body>
    <script type="importmap">
      {
        "imports": {
          "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js"
        }
      }
    </script>

    <div id="app">
      <template v-if="true">
        <header v-if="courseSelection" @click.prevent="courseSelection = false">
          <span class="icon icon-arrow-left"></span>
          Course selection
        </header>
        <header v-else-if="match && hole" @click.prevent="hole = null">
          <span class="icon icon-arrow-left"></span>
          {{ matchTitle }}
        </header>
        <header v-else-if="match" @click.prevent="matchSlug = null">
          <span class="icon icon-arrow-left"></span>
          {{ matchTitle }}
        </header>
        <header v-else>
          UXGolf
        </header>
        <section v-if="courseSelection" class="selection">
          <template v-for="courseItem in coursesData">
            <a v-for="starterItem in courseItem.starters" :key="courseItem.slug + '/' + starterItem.slug" @click.prevent="selectCourse(courseItem, starterItem)">
              <span class="icon icon-arrow-right"></span>
              <b>{{ courseItem.name }}</b><br>
              <small>{{ starterItem.name }}</small>
            </a>
          </template>
        </section>
        <template v-else-if="!match">
          <section class="selection">
            <div>
              <a class="btn" @click="courseSelection = true">New match</a>
            </div>
            <a v-for="matchItem in matches" :key="matchItem.slug" @click.prevent="matchSlug = matchItem.slug">
              <span class="icon icon-arrow-right"></span>
              <b>{{ matchItem.title }}</b><br>
              <small>{{ matchItem.subtitle }}</small>
            </a>
          </section>
        </template>
        <template v-else>
          <nav @click.prevent="hole = null">
            <div class="content">
              <h2>Your score</h2>
              <div class="content-left">
                Brut {{ summary.total.brut }}
              </div>
              <div class="content-right">
                Net {{ summary.total.net > 0 ? "+" : "" }}{{ summary.total.net }}
              </div>
            </div>
          </nav>
          <nav>
            <div class="arrow" @click.prevent="prevHole()">
              <span class="icon icon-arrow-left"></span>
            </div>
            <div v-if="hole" class="content">
              <h2>Hole {{ hole }}</h2>
              <div class="content-left">
                Par {{ currentHole.par }}
              </div>
              <div class="content-right">
                CR {{ cr[hole - 1] }}
              </div>
            </div>
            <div v-else class="content">
              <a class="btn" @click.prevent="hole = nextHoleNumber">Go to the hole {{ nextHoleNumber }}</a>
            </div>
            <div class="arrow" @click.prevent="nextHole()">
              <span class="icon icon-arrow-right"></span>
            </div>
          </nav>
          <section v-if="currentSummary" class="summary-hole">
            <div class="left">
              Brut +{{ currentSummary.brut }}
            </div>
            <div class="right">
              Net {{ currentSummary.net > 0 ? "+" : "" }}{{ currentSummary.net }}
            </div>
          </section>
          <section v-if="hole && currentSummary.net < 2" class="actions">
            <em>{{ currentDistance }}m</em>
            <a class="btn" @click="newStroke()">Add a new stroke</a>
          </section>
          <section v-if="hole && svgData" class="svg">
            <svg viewBox="0 0 400 700">
              <rect width="400" height="700" fill="#DCE3DA"/>
              <path v-for="(path, index) in svgData.course" :key="index" :d="path.d" :transform="path.transform" fill="#dff1dc" />
              <path v-for="(path, index) in svgData.fairway" :key="index" :d="path.d" :transform="path.transform" fill="#9dc592" />
              <path v-for="(path, index) in svgData.water" :key="index" :d="path.d" :transform="path.transform" fill="#3EB6D5" />
              <path v-for="(path, index) in svgData.sand" :key="index" :d="path.d" :transform="path.transform" fill="#e8b85a" />
              <path v-for="(path, index) in svgData.green" :key="index" :d="path.d" :transform="path.transform" fill="#3ed59d" />
              <line v-for="(line, index) in svgData.lines" :key="index" :x1="line.x1" :y1="line.y1" :x2="line.x2" :y2="line.y2" fill="none" stroke="#111" stroke-width="1" stroke-dasharray="2 2" />
              <g v-for="(circle, index) in svgData.circles" :key="index" :transform="`translate(${circle.x} ${circle.y})`" fill="#ff0955" stroke="#111" stroke-width="2">
                <circle cx="5" cy="5" r="5" stroke="none"/>
                <circle cx="5" cy="5" r="4" fill="none"/>
              </g>
              <text v-for="(text, index) in svgData.texts" :key="index" :x="text.x" :y="text.y" font-size="10">{{ text.text }}</text>
            </svg>
          </section>
          <section v-if="hole" class="details">
            <ol>
              <li v-for="(stroke, index) in currentStrokes" :key="index">
                {{ stroke.label }}
                <sup v-if="stroke.green">green</sup>
                <sup v-else-if="stroke.distance">{{ stroke.distance }}m</sup>
                <small>
                  <span>
                    <a @click.prevent="updateStrokeGps(stroke, 'lat', -1)">-</a>
                    Lat
                    <a @click.prevent="updateStrokeGps(stroke, 'lat', 1)">+</a>
                  </span>
                  <span>
                    <a @click.prevent="updateStrokeGps(stroke, 'lng', -1)">-</a>
                    Lng
                    <a @click.prevent="updateStrokeGps(stroke, 'lng', 1)">+</a>
                  </span>
                </small>
              </li>
            </ol>
          </section>
          <section v-if="!hole" class="summary-global">
            <h2>Match index: {{ summary.total.index }}</h2>
            <table>
              <thead>
                <tr>
                  <th>Hole</th>
                  <th>Par</th>
                  <th>Hcp</th>
                  <th>CR</th>
                  <th>Brut</th>
                  <th>Net</th>
                </tr>
              </thead>
              <tbody>
                <tr v-for="(hole, index) in summary.holes" :key="index">
                  <td>{{ index + 1 }}</td>
                  <td>{{ hole.par }}</td>
                  <td>{{ hole.hcp }}</td>
                  <td>{{ cr[index] }}</td>
                  <template v-if="hole.played">
                    <td>{{ hole.brut }}</td>
                    <td>{{ hole.net }}</td>
                  </template>
                  <template v-else>
                    <td colspan="2"><small><i>Not played</i></small></td>
                  </template>
                </tr>
              </tbody>
            </table>
          </section>
          <section v-if="!hole" class="course-detail" @click.prevent="courseSelection = true">
            <h2>{{ course.name }}</h2>
            <span><b>Player</b> {{ match.player }}</span>
            <span><b>Index</b> {{ match.index }}</span>
            <span><b>Starter</b> {{ starter.name }}</span>
            <span><b>Par</b> {{ coursePar }}</span>
            <span><b>Handicap</b> {{ handicap }}</span>
            <span><b>SSS</b> {{ starter.sss }}</span>
            <span><b>Slope</b> {{ starter.slope }}</span>
          </section>
          <section v-if="!hole" class="export">
            <a class="btn" @click.prevent="copyToExport()">
              Export big link
            </a>
            <a class="btn" @click.prevent="copyToExport(true)">
              Export JSON
            </a>
            <a class="btn" @click.prevent="deleteMatch()">
              Delete match
            </a>
          </section>
        </template>
      </template>
    </div>

    <script type="module">
      import { createApp } from 'vue'

      // https://www.ffgolf.org/Jouer/Reglements/Le-systeme-de-handicaping/Calculette-de-jeu
      // - Carte des trous SVG
      // - Update Player name + Index
      // - Convert localStorage to IndexedDB

      const pulnoySvg = {
        hole1: {
          points: {
            a: { lat: 48.700535, lng: 6.268290, x: 300, y: 344 },
            b: { lat: 48.701027, lng: 6.265498, x: 145, y: 593 },
            c: { lat: 48.701576, lng: 6.270853, x: 223, y: 49 }
          },
          course: [
            { d: 'M168.98,1469.776c-7.041,28.163-5.281,48.406,7.921,52.806s35.2-26.4,35.2-71.289,1.76-55.447,17.6-74.809,58.967-113.534,46.646-198.9-50.166-130.255-51.046-187.462,10.561-121.454-35.2-117.934-44.005,32.564-42.245,53.686,11.441,53.686,8.8,84.49,7.921,70.408,12.321,102.092,14.082,52.806,15.842,80.97,5.281,71.288-7.921,105.613-14.082,60.727-7.921,85.37S176.021,1441.612,168.98,1469.776Z', transform: 'translate(0 -836)' }
          ],
          fairway: [
            { d: 'M188.794,1464.394l9.847,3.282s-11.33,35.26-13.871,40.554-5.718,8.894-9.424,7.306-2.647-4.553-.424-10.8S188.794,1464.394,188.794,1464.394Z', transform: 'translate(0 -836)' },
            { d: 'M190.925,1389.02l8.975,1.447s-1.447,22.436-1.737,25.331-.145,6.08-4.053,5.645-5.211-2.605-5.066-5.645S190.925,1389.02,190.925,1389.02Z', transform: 'translate(0 -836)' },
            { d: 'M176.163,937.5c5.361,3.064,19.531,3.447,25.276,27.19s7.659,25.659,6.51,40.594,1.915,34.85,8.042,54.381,13.021,58.21,19.148,69.7,17.616,29.105,14.17,37.531-16.85,10.723-14.17,19.148,6.51,23.361,16.467,32.552-2.681,22.595-2.3,31.786-9.574,55.53-18,63.955-29.488,9.957-34.084,0-12.638-32.935,0-62.423,12.255-46.722,9.574-54-15.319-40.211-19.148-64.721-17.616-72.38-18-88.465,0-54.764-4.979-70.082-5.361-26.042-2.681-31.786S170.8,934.432,176.163,937.5Z', transform: 'translate(0 -836)' }
          ],
          water: [
          ],
          sand: [
            { d: 'M249.854,1184.866c1.539-.77,3.078-2.078,5.54,0s1.231,3.924,2.693,4.54,3.771,2.847,2,6.771-5.617,4.694-7.541,3.54-3.617-2.385-4.155-4.54.231-4.848-1.231-6.079S248.315,1185.635,249.854,1184.866Z', transform: 'translate(0 -836)' },
            { d: 'M189.837,935.2c1.249,1.266,1.665,3.464,3.53,2.531s1.465-2.4,2.931-2.931,4.863-1.6,4.263-3.664-3.33-4.13-5.329-3.131-3.2,3.2-4.529,2.531-2.731,1.132-2.331,2.132A4.725,4.725,0,0,0,189.837,935.2Z', transform: 'translate(0 -836)' },
            { d: 'M157.065,931c-.333,1-.466,2.864.866,3.264s4.263-.333,5.2,0,3.2.866,4.2-.4.733-3.464-1.465-4.8-3.6-2.4-5.928-1.132S157.4,930,157.065,931Z', transform: 'translate(0 -836)' }
          ],
          green: [
            { d: 'M177.115,925.074c2.132.466,8.326.266,11.324-4.13s6.128-13.722,5-16.186-2.265-11.99-7.46-12.123-14.654-2.2-16.386,2.6,1.732,5.4,2.132,7.993,1.6,7.66,1,11.39-1.6,5.4,0,7.194S174.983,924.607,177.115,925.074Z', transform: 'translate(0 -836)' }
          ]
        },
        hole2: {
          points: {
            a: { lat: 48.701982, lng: 6.271855, x: 129, y: 592 },
            b: { lat: 48.700089, lng: 6.273886, x: 256, y: 101 },
            c: { lat: 48.700633, lng: 6.274325, x: 126, y: 131 }
          },
          course: [
            { d: 'M748.969,1421.37c4.4,14.082,11.441,64.248-4.4,84.49s-22,33.444-39.6,18.482-19.362-45.765-16.722-78.329-34.324-150.5-54.567-176.021-44.885-130.255-22-190.983S659.2,948.753,663.6,915.309s58.967-57.207,89.771-47.526,17.6,36.964,22,53.686,3.52,86.25-13.2,121.455-32.564,114.414-29.044,160.179,27.283,93.291,11.441,145.217S744.569,1407.288,748.969,1421.37Z', transform: 'translate(-500 -836)' }
          ],
          fairway: [
            { d: 'M737.75,1430.215l-18.343,2.293a46.977,46.977,0,0,0,1.338,10.891,10.9,10.9,0,0,0,10.509,7.643c4.777,0,8.263-5.428,8.489-9.072S737.75,1430.215,737.75,1430.215Z', transform: 'translate(-503 -840)' },
            { d: 'M708.085,1490.316l15.827-3.43s3.43,19.024,3.664,23.7,1.325,14.19-4.756,15.359-10.993-7.719-12.085-12.163S708.085,1490.316,708.085,1490.316Z', transform: 'translate(-503 -840)' },
            { d: 'M-455.952-423.568h0c-4.509,0-9.083-2.78-13.981-8.5-4.23-4.937-8-11.219-11.322-16.761l-.338-.563c-3.986-6.644-6.294-20.9-8.526-34.685-1.955-12.079-3.8-23.488-6.682-30.175-3.242-7.526-4.977-20.677-6.813-34.6-1.71-12.965-3.478-26.372-6.607-36.3-3.838-12.177-3.959-29.136-3.69-38.161.373-12.494,1.925-24.38,3.69-28.265,3.285-7.227,7.391-27.507,6.934-37.574-.214-4.7,1.389-14.565,4.082-25.133,2.876-11.285,6.283-20.618,9.114-24.966,6.49-9.967,14.2-26.051,18.339-38.244,3.684-10.857,20.361-36.829,28.376-49.311,1.192-1.856,2.221-3.458,2.936-4.59A9.845,9.845,0,0,1-432.071-836c2.8,0,5.2,1.2,6.268,3.138.766,1.389,1.216,3.779-.994,7.284-2.773,4.4-2.977,9.744-.624,16.344,2.046,5.741,5.735,11.624,8.989,16.813l.8,1.285c5.328,8.523,3.89,23.515,2.621,36.741-.332,3.464-.646,6.736-.831,9.779-.52,8.578-4.77,25.505-8.185,39.107-2.449,9.753-4.563,18.173-4.563,20.609a127.612,127.612,0,0,1-1.9,17.948,164.318,164.318,0,0,1-7.269,28.348c-5.944,16.348-6.176,37.287-6.346,52.577v.019c-.033,2.992-.065,5.819-.14,8.239-.2,6.431.949,20.216,3.075,36.875,1.97,15.431,4.15,28.295,5.424,32.01a155.306,155.306,0,0,1,5.423,25.05,137.568,137.568,0,0,1,1.37,17.662,70.3,70.3,0,0,1-1.65,16.781c-2.318,9.589-4.736,15.142-8.084,18.568-3.245,3.321-7.286,4.612-12.879,6.4l-.954.305A11.238,11.238,0,0,1-455.952-423.568Zm-3.019-286.226c-5.136,0-9.672,1.795-15.165,6-3.459,2.649-6.585,7.637-8.574,13.687-1.865,5.669-2.492,11.479-1.679,15.543a15.89,15.89,0,0,0,15.26,12.68,14.839,14.839,0,0,0,3.951-.541c8.679-2.4,19.6-11.994,23.69-25.693a15.4,15.4,0,0,0-1.67-13.4,19.011,19.011,0,0,0-12.356-8.049A28.857,28.857,0,0,0-458.971-709.794Z', transform: 'translate(654.254 936.557)' }
          ],
          water: [],
          sand: [
            { d: 'M692.782,1083.489c2.475-.589,9.075,2.239,10.018,4.243s.354,4.714-4.125,7.543-1.061,4.243-2.593,5.893-4.832,5.893-8.015,4.361-6.129-5.54-5.3-8.6,4.95-2.121,5.3-6.6S690.307,1084.078,692.782,1083.489Z', transform: 'translate(-503 -840)' },
            { d: 'M734.5,960.207c1.179,1.65,3.772,4.125,6.6,3.182s5.422-4.361,7.307-3.771,4.95,4.832,6.718,4.714,7.9-2.593,6.718-8.722-.707-8.486,0-10.843S757.841,939.7,755.72,941s-5.186,7.19-8.132,8.25-10.843-.236-13.082,4.007S733.326,958.557,734.5,960.207Z', transform: 'translate(-503 -840)' },
            { d: 'M702.565,909.409c-3.978,1.562-7.072,5.775-8.132,8.25s-1.886,5.3,0,7.661,7.19,2.829,8.84,5.539,2.829,7.425,6.011,7.307,6.011-5.068,4.714-8.722-3.418-4.832-2.475-8.722,2-6.6-.589-9.075S706.542,907.848,702.565,909.409Z', transform: 'translate(-503 -840)' }
          ],
          green: [
            { d: 'M726.726,890.434c-2.829,2.357-7.543,4.714-5.422,11.786a47.085,47.085,0,0,1,2.122,16.854c-.236,4.6,4.832,13.908,8.486,15.322s12.611.589,16.618-4.007,4.6-12.611,7.543-17.561,7.779-14.025,5.422-17.915-5.186-8.722-12.965-7.425c-2.746.458-8.336,2.766-11.2,2.946C732.924,890.713,728.556,888.909,726.726,890.434Z', transform: 'translate(-503 -840)' }
          ]
        },
        hole3: {
          points: {
            a: { lat: 48.701065, lng: 6.269626, x: 192, y: 3 },
            b: { lat: 48.700388, lng: 6.270362, x: 100, y: 155 },
            c: { lat: 48.699817, lng: 6.273808, x: 178, y: 649 }
          },
          course: [
            { d: 'M1173.248,1518.52c8.124,2.708,20.31-6.093,17.6-36.558s-12.863-67.7,10.832-85.3,59.576-45.359,82.594-104.936,33.173-100.874,36.558-162.481-16.925-132.016-9.478-172.636-31.142-104.936-67.7-110.352-112.383-4.739-115.768,54.16,14.894,31.142,8.8,94.1-11.509,63.638,7.447,87.333,34.527,71.086,27.757,124.569-20.987,76.5-24.372,133.37-12.186,109.675-3.385,129.308S1165.124,1515.812,1173.248,1518.52Z', transform: 'translate(-1000 -836)' }
          ],
          fairway: [
            { d: 'M1156.994,1470.753a18.548,18.548,0,0,0,15.849-1.262s3.366,23,7.013,28.893,0,10.379-1.543,11.221-8.7,3.787-12.343-5.47S1156.994,1470.753,1156.994,1470.753Z', transform: 'translate(-1000 -836)' },
            { d: 'M1156.293,1438.494l12.2,1.4s.14,11.641-2.384,13.184-7.995,1.964-10.379,0S1156.293,1438.494,1156.293,1438.494Z', transform: 'translate(-1000 -836)' },
            { d: 'M-962.139-451.165a18.125,18.125,0,0,1-3.846-.409c-3.691-.8-8.884-3.608-12.668-12.418-3.754-8.74-5.287-21.409-4.557-37.656.638-14.191,2.512-28.427,4.166-40.987,2.542-19.3,4.736-35.972,1.842-46.341a106.271,106.271,0,0,0-4-11.594,52.993,52.993,0,0,1-3.518-11.488c-.868-5.015-1.151-11.555-.889-20.583.441-15.205-3.082-20.415-6.811-25.931-3.013-4.456-6.128-9.063-7.209-19.336-1.1-10.476.461-27.194,2.117-44.893,1.9-20.351,3.873-41.395,1.488-52.451-2.208-10.236-2.515-23.859-.8-35.553a57.3,57.3,0,0,1,4.068-15.147c1.982-4.31,4.387-6.93,7.148-7.786A58.747,58.747,0,0,1-969.006-836a53.87,53.87,0,0,1,15.482,2.113c5.3,1.62,9.463,4.1,12.376,7.358,7.1,7.948,8.773,12.711,11.552,20.6,1.166,3.309,2.486,7.06,4.471,11.846,2.382,5.746,3.9,10.317,5.237,14.35,2.534,7.637,4.536,13.67,10.787,23.306.856,1.32,1.678,2.573,2.474,3.785l.024.036c8.07,12.3,12.941,19.72,15.128,39.042,1.031,9.105,3.379,17.881,5.649,26.368,3.01,11.252,5.854,21.879,5.167,31.718-.423,6.064-2.627,19.232-6.551,39.137-3.323,16.857-7.208,35.192-10.044,48.579-1.318,6.221-2.359,11.136-3.034,14.435-.381,1.864-.8,4.023-1.284,6.524-2.02,10.423-5.073,26.174-9.468,40.883a146.592,146.592,0,0,1-7.669,20.651c-3.14,6.6-6.512,11.605-10.021,14.864-7.259,6.74-13.466,11.544-18.978,14.687C-953.076-452.654-957.8-451.165-962.139-451.165ZM-938.479-676.8a15.61,15.61,0,0,0-2.552.224,18.959,18.959,0,0,0-10.891,6.294,19.4,19.4,0,0,0-4.717,8.945,8.412,8.412,0,0,0,1.915,6.723c2.185,2.619,5.858,4.107,10.34,4.19l.3,0a15.84,15.84,0,0,0,11.421-4.809,13.353,13.353,0,0,0,4.033-9.443C-928.711-668.32-929.845-676.8-938.479-676.8Zm-30.589-33.744c-6.174,0-12.882,5.125-16.33,8.18-5.569,4.933-7.428,13.282-5.955,18.188,1.423,4.744,6.478,9.531,14.563,9.531.155,0,.311,0,.464-.005,7.376-.168,12.575-4.831,16.362-14.676a20.779,20.779,0,0,0,.982-12.269c-.954-3.877-3.144-6.767-6.167-8.137A9.416,9.416,0,0,0-969.067-710.544Z', transform: 'translate(1168.565 948.747)' }
          ],
          water: [
          ],
          sand: [
            { d: 'M1228.288,1127.82c-2.419.666-2.988,3.086-6.214,1.683s-5.19-4.348-3.927-6.312,4.629-2.525,6.171-4.348.927-4.909,3.97-5.049S1234,1118,1234,1120.386s-.281,6.312-2.244,6.452S1230.707,1127.154,1228.288,1127.82Z', transform: 'translate(-1000 -836)' },
            { d: 'M1202.718,1085.462c1.262,2.384,2.1,4.769-.561,7.153s-4.769,2.525-5.049,5.61-.982,5.891-4.488,6.732-8.836-3.927-9.818-6.732-1.262-5.61,4.629-7.434,3.226-6.592,6.171-8.556,4.488-2.525,6.312-1.543S1201.456,1083.077,1202.718,1085.462Z', transform: 'translate(-1000 -836)' },
            { d: 'M1214.5,940.855c2.143.953,4.628.283,7.714,1.122,1.83.5,2.665,5.19,6.732,4.488s6.592,3.086,9.678,2.665,2.945.281,3.226-2.665-1.4-2.1-.842-5.61.842-4.909-1.4-7.293-2.1-5.049-4.488-5.19-5.33,3.086-8.977,2.805-6.592-5.61-9.958-4.909-5.61,2.945-5.47,7.293S1210.713,939.172,1214.5,940.855Z', transform: 'translate(-1000 -836)' },
            { d: 'M1235.679,902.424c4-1.017,6.592-.982,7.293-2.665s-.842-4.068-2.805-4.909-4.068-3.927-4.488-6.031-4.488-4.488-7.153-4.208-7.013,0-6.031,3.506,3.506,5.19,3.506,9.257.7,6.171,1.964,7.714S1231.682,903.441,1235.679,902.424Z', transform: 'translate(-1000 -836)' },
            { d: 'M1171.581,907.333c3.366-1.543,6.312-1.122,7.995,3.506s1.4,7.293,0,8.135-4.208,2.525-6.592-1.262S1168.214,908.876,1171.581,907.333Z', transform: 'translate(-1000 -836)' }
          ],
          green: [
            { d: 'M1213.8,917.011c-4.348,3.506-4.348,3.226-6.171,8.836s-12.764,6.873-14.727,5.049-6.592-6.171-5.891-13.886-7.995-12.2-8.416-18.654,3.366-12.764,11.5-15.569,13.745-6.873,19.215-2.525,10.1,15.428,9.678,20.2S1218.146,913.5,1213.8,917.011Z', transform: 'translate(-1000 -836)' }
          ]
        },
        hole4: {
          points: {
            a: { lat: 48.699505, lng: 6.271687, x: 264, y: 350 },
            b: { lat: 48.700857, lng: 6.270064, x: 220, y: 604 },
            c: { lat: 48.698843, lng: 6.274633, x: 142, y: 66 }
          },
          course: [
            { d: 'M327.566,2313.271c10.415-15.1-16.144-58.847-23.435-109.362s-17.185-142.171-25-160.4-35.413-26.039-34.892-71.346-17.706-117.174-27.6-141.129-35.933-87.49-36.975-101.03-17.706-46.87-36.975-48.432-42.183,9.374-46.349,34.892,20.831,46.349,36.975,60.93,36.454,42.182,34.892,72.387-23.956,44.786-15.623,96.864,16.144,63.534,27.6,84.886-3.645,35.412,21.352,58.847,24.476,8.853,32.288,46.349,28.122,73.429,33.85,98.947,11.457,63.534,22.914,74.47S317.15,2328.373,327.566,2313.271Z', transform: 'translate(0 -1636)' }
          ],
          fairway: [
            { d: 'M310.393,2297.581s3.366-.561,4.629-.842,4.348-1.4,4.348-1.4,4.068,11.5-1.4,13.044S310.393,2297.581,310.393,2297.581Z', transform: 'translate(0 -1636)' },
            { d: 'M287.11,2261.253h10.519s5.049,15.849,3.787,19.5-7.434,4.629-9.678,1.122a38.423,38.423,0,0,1-4.629-13.465A25.024,25.024,0,0,1,287.11,2261.253Z', transform: 'translate(0 -1636)' },
            { d: 'M270.559,2212.163l10.379-.7s2.525,11.782-3.506,12.343S270.559,2212.163,270.559,2212.163Z', transform: 'translate(0 -1636)' },
            { d: 'M256.253,2188.6h9.538s1.964,11.081-3.787,11.782S256.253,2188.6,256.253,2188.6Z', transform: 'translate(0 -1636)' },
            { d: 'M256.253,2084.318c3.081,14.1,8.139,23.111,2.592,28.966s-12.326,13.559-27.425-4.622-32.972-61.938-35.437-80.427-8.012-36.67-9.861-44.99,4.622-28.658,9.861-33.28-5.239-31.74-7.7-35.745-12.326-16.948-11.71-27.733,1.541-41.292-4.314-57.932-8.628-25.884-8.012-33.588-5.239-13.25-2.465-20.03.616-19.105-2.465-22.8-.924-15.715,9.244-11.71,15.407,19.413,19.722,29.582,18.181,67.176,27.425,83.816,14.175,71.491,18.181,83.2,10.785,44.682,4.314,57.624-.308,16.024,2.773,28.966.924,22.187,5.547,33.28S253.171,2070.22,256.253,2084.318Z', transform: 'translate(0 -1636)' }
          ],
          water: [
            { d: 'M238.315,1997.868c.182,2.37,12.764,14.222,16.228,18.6s11.67,15.863,13.311,16.593,5.47,1.823-2.917-7.84-15.863-18.963-19.51-23.157S238.132,1995.5,238.315,1997.868Z', transform: 'translate(0 -1636)' },
            { d: 'M194.554,1943.532c-3.464-4.558-20.422-22.974-25.163-28.445s-11.3-14.222-13.128-15.863.182,4.923,3.1,7.84,22.792,24.98,24.8,27.9S198.018,1948.09,194.554,1943.532Z', transform: 'translate(0 -1636)' }
          ],
          sand: [
            { d: 'M147.919,1763.917c2.67-1.241,5.5-1.618,6.8.647s.755,7.229-3.021,7.66-7.121-.216-7.66-2.7S145.249,1765.158,147.919,1763.917Z', transform: 'translate(0 -1636)' },
            { d: 'M163.779,1728.529c.674-.917,4.316-2.805,5.395.863s-1.51,4.316-3.56,3.776S163.1,1729.446,163.779,1728.529Z', transform: 'translate(0 -1636)' }
          ],
          green: [
            { d: 'M127.851,1722.918c2.994,4.046,6.042,4.855,8.739,8.308s7.984,7.66,13.163,5.179,7.984-13.055,3.992-19.42-7.229-10.573-16.615-10.465-12.084,4.855-12.515,8.523S124.857,1718.872,127.851,1722.918Z', transform: 'translate(0 -1636)' }
          ]
        },
        hole5: {
          points: {
            a: { lat: 48.700666, lng: 6.277227, x: 274, y: 301 },
            b: { lat: 48.699590, lng: 6.277031, x: 230, y: 663 },
            c: { lat: 48.701317, lng: 6.276494, x: 111, y: 81 }
          },
          course: [
            { d: 'M671.609,1673.873c28.6-1.144,37.757-4.577,69.792,0s14.874,67.5,24.027,109.837,42.333,147.594,29.748,226.539-32.036,175.053-29.748,215.1,18.306,82.378-13.73,85.81-35.468-21.739-44.621-78.946,14.874-139.585-5.721-180.774-85.81-125.855-91.531-191.071-29.747-129.287-13.73-157.891S643.005,1675.017,671.609,1673.873Z', transform: 'translate(-500 -1636)' }
          ],
          fairway: [
            { d: 'M729.7,2266.437H763.08s2.135,28.09-16.046,28.09S729.7,2266.437,729.7,2266.437Z', transform: 'translate(-500 -1636)' },
            { d: 'M724.424,2212.657h33.55s3.647,15.5-15.681,15.316S724.424,2212.657,724.424,2212.657Z', transform: 'translate(-500 -1636)' },
            { d: 'M730.077,2143.187h33s3.829,29.356-16.046,29.356S730.077,2143.187,730.077,2143.187Z', transform: 'translate(-500 -1636)' },
            { d: 'M-434.059-1458.4h0c-.207,0-.425,0-.648-.006a30.107,30.107,0,0,1-11.035-2.163,30.067,30.067,0,0,1-8.568-5.413c-5.1-4.486-9.152-10.5-13.446-16.866-2.683-3.978-5.456-8.089-8.613-12.012-9.438-11.726-9.689-17.982-9.932-24.033a35.916,35.916,0,0,0-.883-7.615c-1.161-4.642-1.2-5.833-1.247-7.212-.05-1.5-.107-3.19-1.557-9.612a85.91,85.91,0,0,0-4.026-11.992,101.488,101.488,0,0,1-4.7-14.145,46.1,46.1,0,0,1-.884-16.727,60.464,60.464,0,0,1,4.056-14.684,67.18,67.18,0,0,1,8.563-15.06,54.606,54.606,0,0,1,13.07-12.506,44.63,44.63,0,0,1,17.576-7.023,38.34,38.34,0,0,1,6.279-.536,31.609,31.609,0,0,1,14.833,3.612,39.971,39.971,0,0,1,11.408,9.269,69.376,69.376,0,0,1,8.535,12.577,124.528,124.528,0,0,1,6.214,13.536c3.524,8.9,3.185,17.335,2.756,28.008-.494,12.275-1.108,27.552,4.054,49.707,2.5,10.731,3.108,20.515,1.806,29.078a41.054,41.054,0,0,1-8.086,19.67,31.6,31.6,0,0,1-11.517,9.12A32.989,32.989,0,0,1-434.059-1458.4Zm-21.736-140.514c-5.991,0-10.179,2.947-13.545,5.314q-.379.267-.74.519c-5.75,4-10.969,9.061-11.669,26.8-.671,17,6.575,28.991,20.4,33.768a14.409,14.409,0,0,0,4.712.8c10.648,0,20.626-12.212,25.392-23.557,5.255-12.511,4.141-29.309-10.193-38.637C-446.617-1597.271-451.314-1598.91-455.795-1598.91Z', transform: 'translate(656.578 1796.128)' }
          ],
          water: [
          ],
          sand: [
            { d: 'M692.388,1867.385c-.474,5.215.474,13.748,4.741,15.17s9.007,1.659,8.77-6.4.948-6.4,4.5-10.193,4.741-9.482,1.659-11.852-7.348-.711-12.326,2.133S692.862,1862.171,692.388,1867.385Z', transform: 'translate(-500 -1636)' },
            { d: 'M645.454,1773.992c-.237,4.741,3.793,7.111,8.3,8.059s8.059,2.133,8.533-6.4-.711-10.667-5.215-12.089S645.691,1769.252,645.454,1773.992Z', transform: 'translate(-500 -1636)' },
            { d: 'M716.566,1736.3c-.474,5.215,1.659,16.119,6.163,17.067s12.326.237,12.089-9.245-2.844-12.089-6.637-14.222S717.04,1731.089,716.566,1736.3Z', transform: 'translate(-500 -1636)' }
          ],
          green: [
            { d: 'M664.655,1708.57c6.163-3.082,28.208-8.3,36.03-2.37s9.008,8.533,9.245,15.17-2.844,19.674,0,31.052,4.267,23.941-1.422,30.341-17.067,13.511-27.259,0-.711-15.644-10.43-30.341-14.459-13.511-15.882-23.467S658.492,1711.651,664.655,1708.57Z', transform: 'translate(-500 -1636)' }
          ]
        },
        hole6: {
          points: {
            a: { lat: 48.700534, lng: 6.275565, x: 251, y: 278 },
            b: { lat: 48.702019, lng: 6.276285, x: 133, y: 641 },
            c: { lat: 48.699570, lng: 6.276062, x: 170, y: 44 }
          },
          course: [
            { d: 'M1240.271,1992.5c5.416,31.742,8.124,50.021,0,108.921s-18.956,77.856-16.925,128.631,2.031,94.781-12.863,100.874-23.018-3.385-27.757-21.664-14.894-112.383-31.142-134.047-18.956-100.2-22.341-165.866,2.031-207.84-7.447-237.628-11.509-84.626,13.54-102.228,45.359-21.664,68.377-16.248,37.912,37.235,30.465,53.483-29.111,23.7-27.08,43.328,41.974,54.837,39.943,104.259S1234.855,1960.758,1240.271,1992.5Z', transform: 'translate(-1000 -1636)' }
          ],
          fairway: [
            { d: 'M1189.932,2285.048h20.622s3.793,44.8-7.822,45.274S1189.932,2285.048,1189.932,2285.048Z', transform: 'translate(-1000 -1636)' },
            { d: 'M1181.872,2235.507H1200.6s3.319,20.148-8.533,18.963S1181.872,2235.507,1181.872,2235.507Z', transform: 'translate(-1000 -1636)' },
            { d: 'M1159.828,2159.418h15.645s3.793,20.385-6.163,20.385S1159.828,2159.418,1159.828,2159.418Z', transform: 'translate(-1000 -1636)' },
            { d: 'M1179.265,2075.032c12.089,0,28.919-6.4,31.763-30.341s-.237-124.682-2.133-147.438-1.9-71.586-7.822-77.511.948-27.734-6.4-44.563-7.348-24.415-7.585-30.578-4.03-11.141-10.9-7.348-14.933,4.5-12.089,15.881,2.37,46.46-1.185,66.608-7.585,23.941-9.956,43.852-3.556,83.675-.237,107.615,4.741,55.7,4.267,69.689S1167.176,2075.032,1179.265,2075.032Z', transform: 'translate(-1000 -1636)' }
          ],
          water: [
            { d: 'M1209.843,2165.581c.474,8.059,4.267,28.682-4.03,34.134s-16.83,8.77-20.622,1.9-1.659-14.933,4.03-21.57-.711-16.593-4.03-21.808-5.452-18.489,2.607-18.489,11.615,3.082,16.119,8.533S1209.369,2157.521,1209.843,2165.581Z', transform: 'translate(-1000 -1636)' }
          ],
          sand: [
            { d: 'M1205.669,1712.986c-2.525.14-7.294,2.946-6.031,6.172s3.787,3.506,8.275,2.1,8.977-1.964,7.153-5.751S1208.193,1712.846,1205.669,1712.986Z', transform: 'translate(-1000 -1636)' },
            { d: 'M1144.375,1735.933c2.244.757,7.995,4.544,5.751,8.752s-7.293.14-9.818,2.525-4.208,8.135-8.836,6.031-4.348-6.452-1.262-10.239.561-6.873,4.629-7.995S1142.131,1735.176,1144.375,1735.933Z', transform: 'translate(-1000 -1636)' }
          ],
          green: [
            { d: 'M1161.627,1700.363c-4.208,5.47-12.483,9.4-13.325,15.99s-.561,9.538,1.543,12.483,8.977,5.61,18.234,5.19,10.519-14.026,15.288-18.935,10.66-3.086,11.221-11.08-4.208-14.867-11.221-15.148S1165.835,1694.893,1161.627,1700.363Z', transform: 'translate(-1000 -1636)' }
          ]
        },
        hole7: {
          points: {
            a: { lat: 48.699894, lng: 6.275053, x: 287, y: 536 },
            b: { lat: 48.700217, lng: 6.274271, x: 157, y: 473 },
            c: { lat: 48.702513, lng: 6.273877, x: 138, y: 28 }
          },
          course: [
            { d: 'M307.225,3029.5c.308,13.165-8.628,18.711-7.7,35.659s0,45.914-7.4,49.92-15.716,0-20.954-13.867,4.314-24.652,0-55.467-7.087-69.642-20.03-78.578-15.716-94.6-20.338-109.7-33.9-49.612-32.356-79.811-9.553-95.218-49-124.8S84.433,2563.184,63.787,2548.7s-23.727-68.1,8.012-81.968,67.177-6.471,91.52,7.7,39.135,34.821,42.833,50.228,6.779,25.884,26.809,45.3,6.779,47.455,26.193,60.4,56.083,68.409,56.7,87.206S314,2828.809,310,2857.467s5.547,78.27,0,96.451-11.4,36.361-8.628,52.385S306.917,3016.335,307.225,3029.5Z', transform: 'translate(0 -2436)' }
          ],
          fairway: [
            { d: 'M276.718,3092.584H293.05s2.157,20.338-7.4,20.646S276.718,3092.584,276.718,3092.584Z', transform: 'translate(0 -2436)' },
            { d: 'M276.71,3056.53h15.107s4.006,12.018-7.087,12.018S276.71,3056.53,276.71,3056.53Z', transform: 'translate(0 -2436)' },
            { d: 'M276.319,3027.564h24.126s2.157,14.791-12.018,14.483S276.319,3027.564,276.319,3027.564Z', transform: 'translate(0 -2436)' },
            { d: 'M291.817,2922.485c1.849-9.245-4.006-87.206-1.849-110.934s8.32-104.771-14.483-131.888-60.4-92.445-71.8-99.84-21.57-8.628-24.96-19.413-24.036-15.716-33.588-7.4-9.861,20.646,0,40.368,45.606,45.606,50.228,64.095,7.7,66.252,23.111,72.415,23.111,0,34.821,10.785,7.087,23.727,4.314,36.978-3.7,23.728-9.861,33.9-15.407,14.483-12.942,28.35,11.71,25.576,10.785,43.141,8.936,50.228,24.344,54.542S289.968,2931.73,291.817,2922.485Z', transform: 'translate(0 -2436)' }
          ],
          water: [
          ],
          sand: [
            { d: 'M235.734,2793.679c-4.93-.925-7.7-.308-7.7,6.471s-2.157,13.559,3.39,12.326,7.7-2.157,8.32-8.012S240.664,2794.6,235.734,2793.679Z', transform: 'translate(0 -2436)' },
            { d: 'M240.078,2770.876c-3.728.616-8.658,2.773-8.35-3.7s3.39-5.546,3.081-9.861,3.7-8.012,7.4-5.239,6.779,5.238,5.239,9.552S243.806,2770.26,240.078,2770.876Z', transform: 'translate(0 -2436)' },
            { d: 'M166.709,2517.27c-4.006-.616-8.628-4.006-8.628,5.239s-4.006,8.32,0,12.942,4.314.308,8.628-3.082,8.32-2.157,6.163-7.4S170.715,2517.886,166.709,2517.27Z', transform: 'translate(0 -2436)' },
            { d: 'M114.015,2527.13c4.622-.606,7.4,0,9.244,4.93s2.465,9.552,0,12.018-8.936,4.622-11.4,0-.308-4.622-4.93-8.936S109.393,2527.736,114.015,2527.13Z', transform: 'translate(0 -2436)' }
          ],
          green: [
            { d: 'M124.886,2493.542c8.543,5.239,10.084,2.465,19.02,2.465s12.942,12.018,10.477,19.414-8.936,15.1-15.407,14.791-7.087-7.088-15.407-9.861-14.791,4.006-21.262-1.849-9.244-14.175-4.93-22.495S116.343,2488.3,124.886,2493.542Z', transform: 'translate(0 -2436)' }
          ]
        },
        hole8: {
          points: {
            a: { lat: 48.701900, lng: 6.271898, x: 120, y: 292 },
            b: { lat: 48.702147, lng: 6.273642, x: 340, y: 655 },
            c: { lat: 48.702561, lng: 6.271292, x: 299, y: 76 }
          },
          course: [
            { d: 'M753.362,2853.858c1.5,35.6-3.918,167.612-21.52,197.4s-71.085,66.346-100.2,60.93-31.819-38.589-26.4-64.315,38.589-106.967,33.173-169.928-2.031-145.556-16.925-186.853-3.385-83.271,16.925-97.489,29.788-49.421,77.179-42.651,76.5,32.5,85.98,59.576-14.894,84.626-35.881,121.184S751.864,2818.262,753.362,2853.858Z', transform: 'translate(-500 -2436)' }
          ],
          fairway: [
            { d: 'M624.874,3049.9l41.974,6.093s2.031,37.912-19.633,45.359-24.372-2.708-27.757-11.509S624.874,3049.9,624.874,3049.9Z', transform: 'translate(-500 -2436)' },
            { d: 'M688.513,2991.679l40.62,3.385s-1.354,33.173-10.832,42.651-25.049,3.385-29.788-6.77S688.513,2991.679,688.513,2991.679Z', transform: 'translate(-500 -2436)' },
            { d: 'M652.661,2774.271c0,8.936-1.541,40.059,4.622,54.234s19.105,26.5,32.356,25.268,33.9-12.018,30.2-51.769,3.7-70.875-17.873-77.962-39.443,10.169-43.141,20.338S652.661,2765.334,652.661,2774.271Z', transform: 'translate(-500 -2436)' }
          ],
          water: [
          ],
          sand: [
            { d: 'M641.567,2640.842c2.465,1.541,12.942,4.006,11.4,14.175s-14.791,15.407-18.489,15.716-10.169-.616-8.012-9.861,1.849-8.012,0-16.024S639.1,2639.3,641.567,2640.842Z', transform: 'translate(-500 -2436)' },
            { d: 'M664.987,2690.762c2.465,1.232,10.169,3.7,7.4,12.326s-8.012,13.559-15.1,11.71-13.867-4.931-13.867-8.937,5.855-6.471,10.169-13.559S662.522,2689.53,664.987,2690.762Z', transform: 'translate(-500 -2436)' },
            { d: 'M752.5,2708.635c-3.7,4.314-11.71,7.4-16.948,7.4s-10.785-.308-11.093-7.4-5.239-6.471-3.081-13.559,7.4-4.006,11.71-5.547,8.32-2.465,11.093,0S756.2,2704.321,752.5,2708.635Z', transform: 'translate(-500 -2436)' }
          ],
          green: [
            { d: 'M731.239,2613.108c2.773,4.622,10.477,16.332,16.64,22.187s7.087,17.873-4.622,26.193-12.634,23.728-34.2,22.5-32.048-12.634-34.821-24.344-1.541-27.733,4.622-38.519,16.024-22.495,28.966-20.646S728.466,2608.486,731.239,2613.108Z', transform: 'translate(-500 -2436)' }
          ]
        },
        hole9: {
          points: {
            a: { lat: 48.701183, lng: 6.267913, x: 137, y: 352 },
            b: { lat: 48.702202, lng: 6.270471, x: 273, y: 597 },
            c: { lat: 48.701331, lng: 6.264325, x: 169, y: 17 }
          },
          course: [
            { d: 'M1313.95,3056.937c4.006,12.018,20.03,41.662,18.828,54.882s-.4,18.027-7.611,18.027-14.021-3.605-18.027-26.84-4.006-43.264-15.223-55.282-14.822-5.608-19.229-19.229-26.439-68.5-40.46-80.92-28.042-72.107-41.261-88.531-10.015-34.451-16.424-45.267-18.427-54.08-21.632-86.128-4.006-38.858-8.412-57.285,4.406-24.036-3.605-38.056-38.457-88.531-42.864-112.567-5.208-56.884,11.617-64.095,54.08,3.2,72.508,15.623,17.626,27.641,16.024,44.466-10.015,35.653-11.217,52.077,16.024,32.448,26.439,50.074,20.43,58.086,25.638,88.131,28.042,92.537,37.656,122.582,23.234,90.535,25.638,110.965,6.409,26.439,4.807,45.668-9.614,9.214-3.2,36.053S1309.944,3044.919,1313.95,3056.937Z', transform: 'translate(-1000 -2436)' }
          ],
          fairway: [
            { d: 'M1316.035,3110.887h10.43s3.082,13.037-2.844,13.748S1316.035,3110.887,1316.035,3110.887Z', transform: 'translate(-1000 -2436)' },
            { d: 'M1273.133,3006.877l10.94-1.122s6.452,20.618,6.732,23.563.7,8.416-3.927,9.257-7.995-4.769-8.836-7.995S1273.133,3006.877,1273.133,3006.877Z', transform: 'translate(-1000 -2436)' },
            { d: 'M1287.721,2971.534a5.531,5.531,0,0,0,4.629,6.732c4.208.842,7.854-3.366,8.416-5.61s-1.4-5.611-4.629-5.19S1288.282,2969.29,1287.721,2971.534Z', transform: 'translate(-1000 -2436)' },
            { d: 'M1262.8,2863.019c-1.233,8.936-.925,14.791,5.547,32.048s5.547,34.821-3.39,40.368-25.576,3.7-32.972-17.257-16.64-50.537-27.425-66.56-16.948-62.554-18.489-81.351-3.082-30.507-12.942-55.467-6.163-54.851-17.256-78.27-20.338-44.066-17.873-62.246,3.082-24.344,10.785-24.036,8.32,9.553,15.1,15.1,16.948,5.547,18.489,20.954.925,43.141,8.012,57.624,14.483,24.96,18.181,60.706,10.785,49.612,8.32,67.793-7.7,26.809,2.157,37.286,21.879,4.93,36.362,16.948S1264.03,2854.082,1262.8,2863.019Z', transform: 'translate(-1000 -2436)' }
          ],
          water: [
            { d: 'M1178.263,2562.384c-5.288-.547-9.482-1.276-11.487-9.846s-1.823-11.123-10.028-16.228-5.47-10.758-2.37-13.858,7.476-7.293,6.747-14.4-6.2-10.94-3.464-18.781,11.3-17.687,19.145-15.863,14.952,7.658,16.41,15.863,5.652,22.245,0,33.185-5.288,14.587-4.923,23.157S1183.55,2562.931,1178.263,2562.384Z', transform: 'translate(-1000 -2436)' }
          ],
          sand: [
            { d: 'M1224.759,2800.334c-1.276-2.553-1.459-7.294,1.459-8.023s4.011,0,6.2,1.641,3.647,1.094,6.017,1.641.365,3.647,1.823,4.741,4.558.729,6.017,3.1.729,7.476-1.823,8.388-4.194,1.458-6.017-1.823-1.459-5.105-4.376-4.741S1226.035,2802.886,1224.759,2800.334Z', transform: 'translate(-1000 -2436)' },
            { d: 'M1124.655,2549.255c.912.729,3.1,3.829,2.006,7.111s.182,7.293-2.006,9.117-5.288-.365-6.2-3.464,1.641-3.1,1.094-8.023-.729-6.017,1.094-6.382S1123.744,2548.526,1124.655,2549.255Z', transform: 'translate(-1000 -2436)' },
            { d: 'M1122.609,2522.452c.324,3.647.041,5.652-1.965,5.652s-2.37-1.823-4.558-1.276-2.735-2.553-.729-6.017,1.823-4.558,3.829-4.741S1122.285,2518.805,1122.609,2522.452Z', transform: 'translate(-1000 -2436)' }
          ],
          green: [
            { d: 'M1136.942,2520.32c2.665,0,5.61-.561,7.854-5.189s3.506-9.678,2.1-15.709-1.543-11.642-.842-14.587-.421-8.135-12.623-7.434-16.831,4.488-16.13,9.538,3.787,12.2,3.366,18.094,4.208,10.94,6.312,12.623S1134.277,2520.32,1136.942,2520.32Z', transform: 'translate(-1000 -2436)' }
          ]
        },
        todo: {
          points: {
            a: { lat: 48.701183, lng: 6.267913, x: 137, y: 352 },
            b: { lat: 48.702202, lng: 6.270471, x: 273, y: 597 },
            c: { lat: 48.701331, lng: 6.264325, x: 169, y: 17 }
          },
          course: [
            { d: 'TODO', transform: 'TODO' }
          ],
          fairway: [
            { d: 'TODO', transform: 'TODO' },
            { d: 'TODO', transform: 'TODO' }
          ],
          water: [
            { d: 'TODO', transform: 'TODO' }
          ],
          sand: [
            { d: 'TODO', transform: 'TODO' },
            { d: 'TODO', transform: 'TODO' }
          ],
          green: [
            { d: 'TODO', transform: 'TODO' }
          ]
        }
      }

      const coursesData = [
      {
          slug: '54425-pulnoy-9t',
          name: 'Nancy-Pulnoy 9T (aller)',
          holes: [
            { par: 5, hcp: 6, lat: 48.701799, lng: 6.270520, svg: pulnoySvg.hole1 },
            { par: 4, hcp: 8, lat: 48.700067, lng: 6.274161, svg: pulnoySvg.hole2 },
            { par: 4, hcp: 7, lat: 48.700976, lng: 6.270069, svg: pulnoySvg.hole3 },
            { par: 5, hcp: 3, lat: 48.698924, lng: 6.274515, svg: pulnoySvg.hole4 },
            { par: 3, hcp: 1, lat: 48.701240, lng: 6.276837, svg: pulnoySvg.hole5 },
            { par: 4, hcp: 4, lat: 48.699698, lng: 6.276055, svg: pulnoySvg.hole6 },
            { par: 4, hcp: 2, lat: 48.702269, lng: 6.273779, svg: pulnoySvg.hole7 },
            { par: 3, hcp: 9, lat: 48.702210, lng: 6.271683, svg: pulnoySvg.hole8 },
            { par: 5, hcp: 5, lat: 48.701095, lng: 6.264820, svg: pulnoySvg.hole9 }
          ],
          starters: [
            { slug: 'orange-men', name: 'Orange Men', sss: 27, slope: 50 },
            { slug: 'purple-men', name: 'Purple Men', sss: 32.5, slope: 63 },
            { slug: 'red-men', name: 'Red Men', sss: 33.6, slope: 58 },
            { slug: 'blue-men', name: 'Blue Men', sss: 34.2, slope: 59 },
            { slug: 'yellow-men', name: 'Yellow Men', sss: 35.4, slope: 63 }
          ]
        },
        {
          slug: '54425-pulnoy-18t',
          name: 'Nancy-Pulnoy 18T',
          holes: [
            { par: 5, hcp: 6, lat: 48.701799, lng: 6.270520, svg: pulnoySvg.hole1 },
            { par: 4, hcp: 8, lat: 48.700067, lng: 6.274161, svg: pulnoySvg.hole2 },
            { par: 4, hcp: 7, lat: 48.700976, lng: 6.270069, svg: pulnoySvg.hole3 },
            { par: 5, hcp: 3, lat: 48.698924, lng: 6.274515, svg: pulnoySvg.hole4 },
            { par: 3, hcp: 1, lat: 48.701240, lng: 6.276837, svg: pulnoySvg.hole5 },
            { par: 4, hcp: 4, lat: 48.699698, lng: 6.276055, svg: pulnoySvg.hole6 },
            { par: 4, hcp: 2, lat: 48.702269, lng: 6.273779, svg: pulnoySvg.hole7 },
            { par: 3, hcp: 9, lat: 48.702210, lng: 6.271683, svg: pulnoySvg.hole8 },
            { par: 5, hcp: 5, lat: 48.701095, lng: 6.264820, svg: pulnoySvg.hole9 },
            { par: 4, hcp: 12, lat: 48.697245, lng: 6.264712 },
            { par: 4, hcp: 6, lat: 48.699767, lng: 6.265845 },
            { par: 5, hcp: 18, lat: 48.699211, lng: 6.270744 },
            { par: 3, hcp: 16, lat: 48.699482, lng: 6.268297 },
            { par: 4, hcp: 2, lat: 48.697221, lng: 6.267344 },
            { par: 4, hcp: 4, lat: 48.695829, lng: 6.263235 },
            { par: 3, hcp: 8, lat: 48.698640, lng: 6.262339 },
            { par: 4, hcp: 14, lat: 48.697132, lng: 6.262661 },
            { par: 5, hcp: 10, lat: 48.700283, lng: 6.264399 }
          ],
          starters: [
            { slug: 'orange-men', name: 'Orange Men', sss: 54, slope: 100 },
            { slug: 'purple-men', name: 'Purple Men', sss: 63.6, slope: 119 },
            { slug: 'red-men', name: 'Red Men', sss: 66, slope: 122 },
            { slug: 'blue-men', name: 'Blue Men', sss: 67.6, slope: 125 },
            { slug: 'yellow-men', name: 'Yellow Men', sss: 69.6, slope: 129 }
          ]
        }
      ]

      createApp({
        data () {
          return {
            coursesData,
            matchesData: JSON.parse(localStorage.matches || '[]'),

            courseSelection: false,

            matchSlug: null,
            hole: null,

            currentPosLat: 48.701195,
            currentPosLng: 6.264620
          }
        },

        computed: {
          matches () {
            return this.matchesData.map(match => {
              const date = new Date(match.date).toLocaleString('fr-FR', { day: 'numeric', month: 'numeric', hour: '2-digit', minute: '2-digit' })
              const course = this.coursesData.find(course => course.slug === match.course)
              const starter = course.starters.find(starter => starter.slug === match.starter)
              return {
                slug: match.date,
                title: `${date} - ${match.player} (${match.index})`,
                subtitle: `${course.name} - ${starter.name} - ${match.strokes.length} strokes`
              }
            })
          },

          match () {
            return this.matchesData.find(match => match.date === this.matchSlug)
          },
          matchTitle () {
            const date = new Date(this.match.date).toLocaleString('fr-FR', { day: 'numeric', month: 'numeric', hour: '2-digit', minute: '2-digit' })
            return `${date} - ${this.match.player} (${this.match.index})`
          },
          course () {
            return this.coursesData.find(course => course.slug === this.match.course)
          },
          starter () {
            return this.course.starters.find(starter => starter.slug === this.match.starter)
          },

          coursePar () {
            return this.course.holes.map(hole => hole.par).reduce((a, b) => a + b, 0)
          },
          handicap () {
            return Math.round(this.match.index * this.starter.slope / 113 + (this.starter.sss - this.coursePar))
          },
          cr () {
            const extra = this.handicap % this.course.holes.length
            const cr = this.handicap / this.course.holes.length
            return this.course.holes.map((hole, index) => {
              if (hole.hcp <= extra) {
                return Math.ceil(cr)
              }
              return Math.floor(cr)
            })
          },

          summary () {
            return this.getSummary(this.match.strokes)
          },
          nextHoleNumber () {
            for (let i = 1; i <= this.course.holes.length; i++) {
              if (!this.summary.holes[i - 1].played) {
                return i
              }
            }
            return 1
          },

          currentHole () {
            return this.course.holes[this.hole - 1]
          },
          currentDistance () {
            return this.distanceGps(this.currentPosLat, this.currentPosLng, this.currentHole.lat, this.currentHole.lng)
          },
          currentSummary () {
            return this.summary.holes[this.hole - 1]
          },
          currentStrokes () {
            const strokes = this.match.strokes.filter(stroke => stroke.hole === this.hole)
            const currentStrokes = []
            for (let i = 0; i < strokes.length; i++) {
              const distanceHole = this.distanceGps(strokes[i].lat, strokes[i].lng, this.currentHole.lat, this.currentHole.lng)
              const green = distanceHole < 30
              let distanceNextStroke = 0
              if (!green) {
                distanceNextStroke = i + 1 < strokes.length ? this.distanceGps(strokes[i].lat, strokes[i].lng, strokes[i + 1].lat, strokes[i + 1].lng) : 0
              }
              const time = new Date(strokes[i].date).toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' })
              currentStrokes.push({
                date: strokes[i].date,
                label: time,
                green,
                distance: distanceNextStroke < 10 ? null : (distanceNextStroke || distanceHole),
                lat: strokes[i].lat,
                lng: strokes[i].lng
              })
            }
            return currentStrokes
          },

          svgData () {
            const svg = this.currentHole.svg
            if (!svg) {
              return null
            }

            const { a, b, c } = svg.points

            const lines = []
            const texts = []

            let lastPoint = null
            const circles = this.currentStrokes.map(stroke => {
              const point = this.gpsToPoint(a, b, c, stroke.lat, stroke.lng)
              if (lastPoint) {
                lines.push({
                  x1: lastPoint.x,
                  y1: lastPoint.y,
                  x2: point.x,
                  y2: point.y
                })
              }
              if (point) {
                lastPoint = point
              }
              if (stroke.distance) {
                texts.push({
                  x: point.x + 10,
                  y: point.y + 4,
                  text: `${stroke.distance}m`
                })
              }
              return { x: point.x - 5, y: point.y - 5 }
            }).filter(point => point)

            return {
              ...svg,
              circles,
              lines,
              texts
            }
          }
        },

        mounted () {
          const importMatchData = window.location.hash.match(/^#import\/(.+)$/)
          if (importMatchData) {
            this.importMatchData(importMatchData[1])
            window.location.hash = ''
          }

          const importMatchJsonFile = window.location.hash.match(/^#import-match\/(.+)$/)
          if (importMatchJsonFile) {
            this.importMatchJsonFile(importMatchJsonFile[1])
            window.location.hash = ''
          }

          if (window.localStorage.strokes) {
            const strokes = JSON.parse(window.localStorage.strokes)
            if (strokes.length) {
              const match = {
                date: strokes[0].date,
                player: 'Dewep',
                index: 54,
                course: '54425-pulnoy-18t',
                starter: 'blue-men',
                strokes
              }
              this.matchesData.unshift(match)
              this.matchSlug = match.date
              this.saveLocalStorage()
            }
            delete window.localStorage.strokes
          }

          if (window.location.protocol === 'https:') {
            this.watchLocation()
          }

          window.newStroke = (lat, lng) => {
            this.newStroke(lat, lng)
          }
        },

        methods: {
          watchLocation () {
            navigator.geolocation.watchPosition(position => {
              this.currentPosLat = position.coords.latitude
              this.currentPosLng = position.coords.longitude
            }, console.warn, {
              enableHighAccuracy: true,
              maximumAge: 0
            })
          },

          getSummary (strokes) {
            const summary = {
              total: { brut: 0, net: 0, index: 0 },
              holes: []
            }
            for (let i = 1; i <= this.course.holes.length; i++) {
              const hole = this.course.holes[i - 1]
              const holeStrokes = strokes.filter(stroke => stroke.hole === i)
              const played = !!holeStrokes.length
              const holeSummary = {
                played,
                par: hole.par,
                hcp: hole.hcp,
                brut: played ? holeStrokes.length : (hole.par + this.cr[i - 1]),
                net: played ? (holeStrokes.length - hole.par - this.cr[i - 1]) : 0
              }
              summary.holes.push(holeSummary)
              summary.total.brut += holeSummary.brut
              summary.total.net += holeSummary.net
            }
            summary.total.index = this.match.index + summary.total.net
            return summary
          },

          distanceGps (lat1, lon1, lat2, lon2) {
            const R = 6371000 // metres
            const dLat = (lat2-lat1) * Math.PI / 180
            const dLon = (lon2-lon1) * Math.PI / 180
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                    Math.sin(dLon/2) * Math.sin(dLon/2)
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a))
            const d = R * c
            return Math.ceil(d)
          },
          distancePoints (x1, y1, x2, y2) {
            return Math.hypot(x2 - x1, y2 - y1)
          },
          circleIntersections (x1, y1, r1, x2, y2, r2) {
            let dx = x2 - x1
            let dy = y2 - y1
            const d = Math.sqrt(dx * dx + dy * dy)

            if (d > r1 + r2) {
              console.warn('Circles too far apart')
              return null
            }
            if (d < Math.abs(r1 - r2)) {
              console.warn('One circle completely inside the other')
              return null
            }
            dx /= d
            dy /= d
            const a = (r1 * r1 - r2 * r2 + d * d) / (2 * d)
            const px = x1 + a * dx
            const py = y1 + a * dy
            const h = Math.sqrt(r1 * r1 - a * a)

            return {
              x1: px + h * dy,
              y1: py - h * dx,
              x2: px - h * dy,
              y2: py + h * dx
            }
          },
          gpsToPoint (a, b, c, lat, lng) {
            const distABGps = this.distanceGps(a.lat, a.lng, b.lat, b.lng)
            const distABSvg = this.distancePoints(a.x, a.y, b.x, b.y)
            const distMultiplier = distABSvg / distABGps

            const distancesGps = {
              a: distMultiplier * this.distanceGps(a.lat, a.lng, lat, lng),
              b: distMultiplier * this.distanceGps(b.lat, b.lng, lat, lng),
              c: distMultiplier * this.distanceGps(c.lat, c.lng, lat, lng)
            }
            const ca = { x: a.x, y: a.y, r: distancesGps.a }
            const cb = { x: b.x, y: b.y, r: distancesGps.b }

            const intersections = this.circleIntersections(ca.x, ca.y, ca.r, cb.x, cb.y, cb.r)

            if (!intersections) {
              return null
            }

            const distC1 = this.distancePoints(c.x, c.y, intersections.x1, intersections.y1)
            const distC2 = this.distancePoints(c.x, c.y, intersections.x2, intersections.y2)

            if (Math.abs(distC1 - distancesGps.c) < Math.abs(distC2 - distancesGps.c)) {
              return { x: intersections.x1, y: intersections.y1 }
            }
            return { x: intersections.x2, y: intersections.y2 }
          },

          prevHole () {
            if (this.hole === 1) {
              this.hole = null
            } else if (this.hole === null) {
              this.hole = this.course.holes.length
            } else {
              this.hole -= 1
            }
          },

          nextHole () {
            if (this.hole === this.course.holes.length) {
              this.hole = null
            } else if (this.hole === null) {
              this.hole = 1
            } else {
              this.hole += 1
            }
          },

          updateStrokeGps ({ date }, position, modifier) {
            const stroke = this.match.strokes.find(stroke => stroke.date === date)
            if (stroke) {
              stroke[position] += modifier * 0.00001
            }
            this.saveLocalStorage()
          },
          newStroke (lat = null, lng = null) {
            if (this.currentSummary.net >= 2) {
              return
            }
            this.match.strokes.push({
              hole: this.hole,
              date: new Date().toISOString(),
              lat: lat || this.currentPosLat,
              lng: lng || this.currentPosLng
            })
            this.saveLocalStorage()
          },

          selectCourse (course, starter) {
            if (this.match) {
              this.match.course = course.slug
              this.match.starter = starter.slug
            } else {
              const match = {
                date: new Date().toISOString(),
                player: 'Dewep',
                index: 54,
                course: course.slug,
                starter: starter.slug,
                strokes: []
              }
              this.matchesData.unshift(match)
              this.matchSlug = match.date
            }
            this.courseSelection = false
            this.saveLocalStorage()
          },

          copyToExport (jsonOnly = false) {
            let content = JSON.stringify(this.match)
            if (!jsonOnly) {
              const exportData = encodeURIComponent(window.btoa(content))
              content = window.location.href + '#import/' + exportData
            }
            navigator.clipboard.writeText(content)
          },
          importMatchData (data) {
            try {
              const match = JSON.parse(atob(decodeURIComponent(data)))
              this.importMatch(match)
            } catch (err) {
              console.warn('Error importing matchData', err)
            }
          },
          async importMatchJsonFile (slug) {
            try {
              const response = await fetch(`./matches/${slug}.json`)
              const match = await response.json()
              this.importMatch(match)
            } catch (err) {
              console.warn('Error importing matchJsonFile', err)
            }
          },
          importMatch (match) {
            this.matchesData = this.matchesData.filter(match => match.date !== match.date)
            this.matchesData.unshift(match)
            this.matchSlug = match.date
            this.saveLocalStorage()
          },

          deleteMatch () {
            this.matchesData = this.matchesData.filter(match => match.date !== this.matchSlug)
            this.matchSlug = null
            this.saveLocalStorage()
          },

          saveLocalStorage () {
            window.localStorage.matches = JSON.stringify(this.matchesData)
          }
        }
      }).mount('#app')
    </script>
  </body>
</html>